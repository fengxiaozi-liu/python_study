[TOC]

##### 1.关于服务器

###### 定义

+ 服务器是给客户端提供服务的

###### 服务器的组成

+ CPU
+ 内存
+ 硬盘
+ RAID卡
+ 网卡
+ 电源
+ 风扇
+ 主板
+ 机箱

###### 服务器的分类

+ 按照处理器架构分类
  + x86架构服务器
  + RISC架构服务器（精简指令集）
  + EPIC架构服务器（精确并行指令集）、
+ 按照功能进行划分
  + 文件服务器
  + 打印服务器
  + 数据库服务器
  + web服务器
  + 虚拟化服务器
  + 基础架构服务器
  + 多媒体服务器
  + 通讯服务器
  + 邮件服务器
  + 域控制服务器
  + 终端服务器
+ 按照外观进行分类
  + 塔式服务器
  + 机架式
  + 刀片式

###### 服务器的优势

+ 处理能力强
+ i/o性能强
+ 管理能力强
+ 可靠性强
+ 可用性高
+ 可扩展性强

服务器性能的评价标准（rassm)

+ reliability
+ availability
+ security
+ scalability
+ manageability

###### 服务器的芯片组

+ 定义：这里所说的芯片组就是系统，以前的系统是CPU，南桥，北桥，并且内存和北桥相连，现在的芯片组是CPU+PCH(南桥)
+ 芯片组的中各个组件的相连

![](C:\Users\lyj0120\Desktop\批注 2020-11-30 090542.png)



##### 2.关于CPU

###### 定义

+ CPU又称为中央处理器，CPU包括运算器，高速缓冲存储区以及关联他们的数据，控制以及状态总线

###### 影响CPU性能的指标

+ CPU的工作频率(主频)

  + ·主频也叫做时钟频率 

    `主频` =`外频`*`倍频`

    主频是用来表示CPU的运算，处理速度，通常主频越高，CPU处理速度就越快

+ cache容量(缓存)

  + 定义：
    + 缓存是位于CPU和内存之间的临时存储器
  + 缓存的作用
    + 在实际工作时，将重复读取的数据保存起来，CPU在缓存中能找到就不用再去内存了

+ 指令系统和逻辑结构等参数

  1. 核心数：
     + 每个核心都有一个线程，通过超线程让单核心拥有多线程
  2. 线程数：
     + 线程数量越多速度就越快，但是功耗就越大

###### CPU PCIE可扩展性

1. 每个CPU都有4个IO模块，IOU0用于连接PCH，IOU1~IOU3都可以连接PCIE设备，每个IO下面都有十六个PCIE通道，可以根据需要进行组合

###### CPU的衡量指标

+ 架构
+ 封装方式
+ 主频
+ 供电电压
+ CPU字长，功率，型号
+ 微架构，平台
+ CPU核数

##### 3.关于内存

###### 定义

+ 内存又称为内存储器，其作用是用于暂时存放CPU中的运算数据，以及硬盘等外部存储交换的数据，计算机的运行计算都要在内存中进行

###### 内存的分类

+ SDRAM 同步DRAM
+ SGRAM 同步图形RAM
+ VRAM 一种存储计算机图像得到RAM
+ MDRAM 多动态随机存取存储器，一种高性能的VRAM
+ EDRAM 增强的DRAM

###### 内存条的分类

| 类型   | 差别              | 特点               |
| ------ | ----------------- | ------------------ |
| UDIMM  | 无buffer的芯片    | 适用于低端CPU平台  |
| RDIMM  | Registered DIMM   | 适用于主流场景     |
| LRDIMM | Load-Reduced DIMM | 适用于大容量场景   |
| NVDIMM | 非易失性NVDIMM    | 在V6 CPU中进行引用 |

内存带宽的计算：`内存标称频率`*`内存总线位数`  * `实际使用通道数`

###### 内存条的配置原则

+ 采用平衡插法
+ 多个CPU时，保证各个CPU的配置一致
+ 当只有一个DIMM时，必须将内存条插到离CPU最远的位置
+ 当插入2DPC时，总是先从最远的槽位开始插rank高的DIMM
+ 内存带宽的计算：`内存标称频率`*`内存总线位数`  * `实际使用通道数`

###### 服务器内存

+ 关于服务器内存
  + 服务器内存比普通的内存多了几颗芯片，主要是PPL(Phase Locked Loop) 和 Register IC 
    + PPL:锁相环集成电路芯片，主要是为了调整时钟信号，保证内存条之间的信号同步
    + Register IC :主要是用来提高驱动能力，通过它服务器才可以驱动大量的内存
+ 关于Register
  + 主要是用来重新驱动控制信号改善内存运作，提高电平信号的准确性，保证系统长时间稳定运作
+ 关于ecc内存
  + 定义：ecc内存是一种广泛应用于各个领域的计算机指令，是一种指令纠错技术
  + 作用：可以发下2bit位的错误，并纠正1bit位的错误
  + 补充：因为ecc不能够修改内存结构，也不能改变存储的方式，因此它不是一种内存
+ 关于chipkill技术
  + 产生背景
    + 日益增长的CPU性能使得硬盘的驱动性不能够跟的上，所以人们转而向大量的内存寻求解决办法，而大量内存的运行，势必会早成双比特位以上的错误，但是ecc只能解决单比特位的错误，所以chipkill技术应用而生
  + 作用：解决ecc不能解决的双比特位的错误
  + 解决方式：通过生成一个ecc识别码，ecc只关注这一个识别码，这样ecc就能同时检查并修复多个数据位
+ 保证服务器中数据完整性的办法
  + 内存保护技术：使用热备份
  + 内存镜像

##### 4.硬盘

###### 定义

+ 硬盘是用于存放数据，做持久化存储的

###### 硬盘的分类

+ 按照接口进行分类

  | 类型 | 串行/并行            | 特点                                                         |
  | ---- | -------------------- | ------------------------------------------------------------ |
  | SATA | 串行                 | 采用串行技术用于更高的传输速度以及可靠性                     |
  | SCSI | 并行                 | 内存吞吐量大，CPU占用率地                                    |
  | SAS  | 串行                 | 将SCSI采用串行技术连接，不仅保证了SCSI的特点，还提高了传输的速度 |
  | SSD  | 既不是串行也不是并行 | 快， 贵， 耐用                                               |

+ 基于业务的不同进行分类（机械硬盘)

  + 企业级Performance类
  + 企业级Capacity类
  + 企业级云盘类
  + 桌面级硬盘

+ 基于也业务和flash介质不同进行分类(固态硬盘)

  + 读密集型
  + 均衡型
  + 写密集型

###### 硬盘的衡量指标

+ 容量
+ 数据传输效率
+ 转速
+ 平均访问时间
+ IOPS(即每秒钟的读写速度)

###### 服务器硬盘

+ 速度快
+ 可靠性高
+ 多使用SCSI
+ 支持热插拔

###### 固态硬盘

+ 组件以及衡量性能的指标
  + 控制芯片，NAND FLASH，DDR内存
+ 优点
  + 高性能
  + 可靠性

##### 5.Raid

###### 定义

Raid是独立磁盘冗余阵列，它是将同一磁盘视为单一的虚拟磁盘

###### 基本概念

+ 分块：将一个分区分成地址相等，大小相邻的的块。它是组成条带的元素
+ 条带：同一磁盘阵列中多个磁盘驱动器上的相同“位置”的分块
+ 热备：当冗余的RAID组中某个硬盘失效时，在不干扰当前RAID系统正常使用的情况下，用RAID系统中另外一个正常的备用硬盘自动顶替失效硬盘，及时保证RAID系统的冗余
  + 全局式热备：备用硬盘为系统中所有的冗余RAID组共享
  + 专用式热备：备用硬盘为系统中某一组冗余RAID组共享

###### 作用

1. 提高数据访问的速度、
   + 硬盘条带化 --> 通过块状化数据，来减少寻道时间
   + 多个磁盘同时读取
2. 数据冗余保护
   1. 镜像保护
   2. 奇偶校检

###### 分类

+ 基础radi级别

  | Raid级别 | 作用             | 工作原理                                                     | 可用空间 | 冗余类型 |
  | -------- | ---------------- | ------------------------------------------------------------ | -------- | -------- |
  | raid0    | 条带化           | 进行分块条带                                                 | 100%     | 无冗余   |
  | raid1    | 镜像             | 进行镜像复制                                                 | 50%      | 镜像冗余 |
  | raid3    | 奇偶位条带       | 开辟出一块新的空间用来存储校检码                             | (N-1)/N  | 校检冗余 |
  | raid5    | 分布式奇偶条带   | 在数据内存随机位置生成校检码                                 | (N-1)/N  | 校检冗余 |
  | raid6    | 双分布式奇偶条带 | 在数据内存生成校检码的同时，在外部开辟出来一块空间再保存一组校检码 | (N-2)/N  | 校检冗余 |

+ 进阶raid级别

  + raid10：就是先进行镜像再进行条带
  + raid50：先进行条带，在进行分布式奇偶条带

+ Raid是如何进行cache保护的

  + 电池方案：异常断电之后，BBU电池模块继续给DDR内存供电，保证数据仍然在内存那种
  + 电容解决方案：异常断电之后，超级电容继续给控制器,DDR,NVND FLASH卡供电，保证数据从DDR写入到flash卡中



##### 6.GPU

###### 定义

+ GPU是图像处理器，又称为显示核心，视觉处理器，显示芯片，实在电脑上进行图像处理的

###### GPU的关键技术和指标

+ cuda:代表GPU的并行处理能力
+ 显存容量：存储GPU要处理的数据或者是处理完毕的数据，显存容量的大小决定了GPU能够加载数据量的带下

+ 显存位宽：显存在一个时钟周期内所能够传送的数据
+ 显存频率：一定程度上反映显存的速度
+ 显存带宽：显示芯片与显存之间的数据传输速率

##### 7.网卡

###### 定义

+ 网卡又称为网络适配器或者网络接口卡的NIC，是构成计算机系统找那个最基本的，最重要的和必不可少的连接设备，计算机通过网卡接入网络

###### 功能

+ 代表固定的网络地址
+ 数据的发送和接受
+ 数据的封装和解封
+ 链路管理
+ 编码和译码

###### 网卡分类

1. 按照总线类型划分
   + pcie、USB、ISA、PCI
2. 按照结构形态
   + 集成网卡、pcie标卡网卡、Mezz卡
3. 按照应用类型进行划分
   + 工作站网卡和服务器网卡

###### 网卡接口

光口：用于连接光模块，网卡上用于插入光模块的接口，我们叫做光笼子

电口：rj45接口

##### 8.可信计算基础知识

###### 可信计算

+ 从芯片、硬件结构、BIOS和操作系统等方面采取综合措施
+ 首先，在计算机系统中建立一个信任根，信任根可信性可由安全保护措施确保
+ 然后，再建立一条信任链，从信任根->Hardware platform -> os - APP, 一级度量一级，一级认证一级，把这种信任扩展到整个计算机系统中

###### TCG：可信计算机组织

###### TPM

+ TPM:可信品台模块
+ TPM是一个微处理器，可以存储秘钥，密码，和数字证书
+ TPM一般镶嵌在pc主板上，同样可以用在任何需要TPM功能的计算机设备上
+ TPM芯片抵御外部软件攻击和物理盗窃，确保信息存储的安全性

可信启动基本原理

1. 从tbb可信基础模块的启动根开始
2. 从启动根开始度量下一级的运行代码，将度量的哈希结果扩展到TPM芯片中的PCR保存起来，为后续做远程证明的审计验证提供基础，之后再执行度量代码
3. 如此这样反复，上一级度量验证下一级之后再启动下一级，从而将信任链从crtm延伸到整个系统，并可在系统启动后通过第三方的远程证明进行验证系统的可信状态

##### 9.服务器基准测试体系

###### 两个基准体系：TPC 、SPEC

###### 四大应用体系中的基准测试

+ 高性能计算
+ 在线事务处理
+ web服务器
+ Java应用服务器

